branch_name=$(git symbolic-ref --short HEAD)

protected_branches=("main" "staging")

for branch in "${protected_branches[@]}"; do
  if [ "$branch_name" = "$branch" ]; then
    echo "ðŸš« Pushes to '$branch' branch are not allowed directly!"
    echo "Please create a feature branch and open a Pull Request instead."
    exit 1
  fi
done

echo "âœ… Push allowed on branch: $branch_name"

pattern="^cl-[0-9]+\/[a-z0-9._-]+$"

if ! echo "$branch_name" | grep -Eq "$pattern"; then
  echo "ðŸš« Invalid branch name: '$branch_name'"
  echo "âœ… Use format: cl-[issue-number]/[description]"
  echo "   e.g. cl-42/add-login-ui"
  exit 1
fi
